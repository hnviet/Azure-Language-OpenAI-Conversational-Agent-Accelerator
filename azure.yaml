# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: azure-language-openai-conversational-agent
metadata:
  template: azure-language-openai-conversational-agent@1.0

environments:
  dev:
    parameters:
      # must match your existing AI Foundry SKUs & capacities:
      gpt_model_name:            "gpt-4o-mini1"
      gpt_deployment_capacity:   1
      gpt_deployment_type:       "GlobalStandard1"
      embedding_model_name:      "text-embedding-ada-0021"
      embedding_deployment_capacity: 1
      embedding_deployment_type: "GlobalStandard1"

      # these must exactly match your bicep params:
      acr_name:    "hnvietacr1"    # NOT acrName
      image_tag:   "latest1"       # your new param
      acs_connection_string: ${{ secrets.ACS_CONNECTION_STRING }}

hooks:
  postprovision:
    posix:
      run: |
        echo "Web app URL:"
        echo $WEB_APP_URL
      shell: sh
      continueOnError: false
      interactive: true
    windows:
      run: |
        Write-Host "Web app URL:"
        Write-Host "$env:WEB_APP_URL" -ForegroundColor Cyan
      shell: pwsh
      continueOnError: false
      interactive: true